syntax = "proto3";
package seat.v1;
option go_package = "github.com/yunmaoQu/kratos-12306/api/seat/v1;v1";

import "google/api/annotations.proto";

service SeatService {
  rpc Hold(HoldRequest) returns (HoldReply) {
    option (google.api.http) = { post: "/api/seats/hold", body: "*" };
  }
  rpc Release(ReleaseRequest) returns (ReleaseReply) {
    option (google.api.http) = { post: "/api/seats/release", body: "*" };
  }
}

message HoldRequest {
  string trip_id = 1;
  int32 from_idx = 2;
  int32 to_idx = 3;
  string seat_class = 4;
  int32 count = 5;
  string client_req_id = 6;
}
message Assignment { int32 carriage_no = 1; string seat_no = 2; }
message HoldReply {
  string reservation_id = 1;
  int64 expire_at_unix = 2;
  repeated Assignment assignments = 3;
}
message ReleaseRequest { string reservation_id = 1; }
message ReleaseReply { bool ok = 1; }